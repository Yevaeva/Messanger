[{"/home/yeva/Messanger/src/index.js":"1","/home/yeva/Messanger/src/App.js":"2","/home/yeva/Messanger/src/reportWebVitals.js":"3","/home/yeva/Messanger/src/components/homePage/HomePage.js":"4","/home/yeva/Messanger/src/components/register/Register.js":"5","/home/yeva/Messanger/src/components/signIn/SignIn.js":"6","/home/yeva/Messanger/src/components/notFound/NotFound.js":"7","/home/yeva/Messanger/src/components/dashboard/Dashboard.js":"8","/home/yeva/Messanger/src/components/chatPage/ChatPage.jsx":"9","/home/yeva/Messanger/src/components/toaster.js":"10","/home/yeva/Messanger/src/components/Home/Home.jsx":"11","/home/yeva/Messanger/src/components/useChat.js":"12","/home/yeva/Messanger/src/components/useTyping.js":"13","/home/yeva/Messanger/src/components/ChatMessage/ChatMessage.js":"14","/home/yeva/Messanger/src/components/NewMessageForm/NewMessageForm.js":"15","/home/yeva/Messanger/src/components/TypingMessage/TypingMessage.js":"16","/home/yeva/Messanger/src/components/Users/Users.js":"17","/home/yeva/Messanger/src/components/UserAvatar/UserAvatar.js":"18","/home/yeva/Messanger/src/components/TypingAnimation/TypingAnimation.js":"19"},{"size":709,"mtime":1642158764762,"results":"20","hashOfConfig":"21"},{"size":1145,"mtime":1642159077553,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":1642158099249,"results":"23","hashOfConfig":"21"},{"size":640,"mtime":1642159077553,"results":"24","hashOfConfig":"21"},{"size":4462,"mtime":1642159989308,"results":"25","hashOfConfig":"21"},{"size":4218,"mtime":1642159994172,"results":"26","hashOfConfig":"21"},{"size":223,"mtime":1642158741254,"results":"27","hashOfConfig":"21"},{"size":1476,"mtime":1642159077553,"results":"28","hashOfConfig":"21"},{"size":2165,"mtime":1642159966724,"results":"29","hashOfConfig":"21"},{"size":435,"mtime":1642159077553,"results":"30","hashOfConfig":"21"},{"size":1207,"mtime":1642159077553,"results":"31","hashOfConfig":"21"},{"size":4235,"mtime":1642159077557,"results":"32","hashOfConfig":"21"},{"size":928,"mtime":1642159077557,"results":"33","hashOfConfig":"21"},{"size":751,"mtime":1642159077553,"results":"34","hashOfConfig":"21"},{"size":701,"mtime":1642159077553,"results":"35","hashOfConfig":"21"},{"size":487,"mtime":1642159077553,"results":"36","hashOfConfig":"21"},{"size":552,"mtime":1642159077553,"results":"37","hashOfConfig":"21"},{"size":283,"mtime":1642159077553,"results":"38","hashOfConfig":"21"},{"size":281,"mtime":1642159077553,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"xywit",{"filePath":"42","messages":"43","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"48"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"48"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"/home/yeva/Messanger/src/index.js",["81"],"/home/yeva/Messanger/src/App.js",["82"],"/home/yeva/Messanger/src/reportWebVitals.js",[],"/home/yeva/Messanger/src/components/homePage/HomePage.js",[],["83","84"],"/home/yeva/Messanger/src/components/register/Register.js",[],"/home/yeva/Messanger/src/components/signIn/SignIn.js",["85","86","87"],"/home/yeva/Messanger/src/components/notFound/NotFound.js",[],"/home/yeva/Messanger/src/components/dashboard/Dashboard.js",[],"/home/yeva/Messanger/src/components/chatPage/ChatPage.jsx",[],"/home/yeva/Messanger/src/components/toaster.js",[],"/home/yeva/Messanger/src/components/Home/Home.jsx",["88"],"import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\n\nimport \"./Home.css\";\n\nconst Home = (props) => {\n  const [roomName, setRoomName] = useState(\"\");\n  const [chatrooms, setChatrooms] = useState([]);\n\n  const getChatrooms = () => {\n    axios\n      .get(\"http://localhost:8080/chatroom\", {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n        },\n      })\n      .then((response) => {\n        setChatrooms(response.data);\n        console.log(response.data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  React.useEffect(() => {\n    getChatrooms();\n    // eslint-disable-next-line\n  }, []);\n\n  const handleRoomNameChange = (event) => {\n    setRoomName(event.target.value);\n  };\n\n  return (\n    <div className=\"home-container\">\n      <input\n        type=\"text\"\n        placeholder=\"Room\"\n        value={roomName}\n        onChange={handleRoomNameChange}\n        className=\"text-input-field\"\n      />\n      <Link\n        to={`/home/${roomName}/${props.emailQuery}`}\n        className=\"enter-room-button\"\n      >\n        Join room\n      </Link>\n    </div>\n  );\n};\n\nexport default Home;\n","/home/yeva/Messanger/src/components/useChat.js",["89","90"],"import { useEffect, useRef, useState } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport axios from \"axios\";\n\nconst USER_JOIN_CHAT_EVENT = \"USER_JOIN_CHAT_EVENT\";\nconst USER_LEAVE_CHAT_EVENT = \"USER_LEAVE_CHAT_EVENT\";\nconst NEW_CHAT_MESSAGE_EVENT = \"NEW_CHAT_MESSAGE_EVENT\";\nconst START_TYPING_MESSAGE_EVENT = \"START_TYPING_MESSAGE_EVENT\";\nconst STOP_TYPING_MESSAGE_EVENT = \"STOP_TYPING_MESSAGE_EVENT\";\nconst SOCKET_SERVER_URL = \"http://localhost:8080\";\n\nconst useChat = (roomId, email) => {\n  const [messages, setMessages] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [typingUsers, setTypingUsers] = useState([]);\n  const [user, setUser] = useState();\n  const socketRef = useRef();\n\n  \n\n  useEffect(() => {\n    const fetchUser = async () => {\n      // const response = await axios.get(\"https://api.randomuser.me/\");\n      const response = await axios.get(`${SOCKET_SERVER_URL}/user/:${email}`);\n      // const result = response.data.results[0];\n      const result = response.data\n      console.log(result);\n      setUser({\n        picture: result.picture,\n        name: result.name\n        // name: result.name.first,\n        // picture: result.picture.thumbnail,\n      });\n    };\n\n    fetchUser();\n  }, []);\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const response = await axios.get(\n        `${SOCKET_SERVER_URL}/rooms/${roomId}/users`\n      );\n      const result = response.data.users;\n      setUsers(result);\n    };\n\n    fetchUsers();\n  }, [roomId]);\n\n  useEffect(() => {\n    const fetchMessages = async () => {\n      const response = await axios.get(\n        `${SOCKET_SERVER_URL}/rooms/${roomId}/messages`\n      );\n      const result = response.data.messages;\n      setMessages(result);\n    };\n\n    fetchMessages();\n  }, [roomId]);\n\n  useEffect(() => {\n    if (!user) {\n      return;\n    }\n    socketRef.current = socketIOClient(SOCKET_SERVER_URL, {\n      query: { roomId, name: user.name, picture: user.picture },\n    });\n\n    socketRef.current.on(\"connect\", () => {\n      console.log(socketRef.current.id);\n    });\n\n    socketRef.current.on(USER_JOIN_CHAT_EVENT, (user) => {\n      console.log('user',user);\n      console.log('socketRef.current',socketRef.current);\n\n      if (user.id === socketRef.current.id) return;\n      setUsers((users) => [...users, user]);\n    });\n\n    socketRef.current.on(USER_LEAVE_CHAT_EVENT, (user) => {\n      setUsers((users) => users.filter((u) => u.id !== user.id));\n    });\n\n    socketRef.current.on(NEW_CHAT_MESSAGE_EVENT, (message) => {\n      console.log('message',message);\n      const incomingMessage = {\n        ...message,\n        ownedByCurrentUser: message.senderId === socketRef.current.id,\n      };\n      console.log(incomingMessage,'incomingMessage');\n      setMessages((messages) => [...messages, incomingMessage]);\n      console.log('messages',messages);\n    });\n\n    socketRef.current.on(START_TYPING_MESSAGE_EVENT, (typingInfo) => {\n      if (typingInfo.senderId !== socketRef.current.id) {\n        const user = typingInfo.user;\n        setTypingUsers((users) => [...users, user]);\n      }\n    });\n\n    socketRef.current.on(STOP_TYPING_MESSAGE_EVENT, (typingInfo) => {\n      if (typingInfo.senderId !== socketRef.current.id) {\n        const user = typingInfo.user;\n        setTypingUsers((users) => users.filter((u) => u.name !== user.name));\n      }\n    });\n\n    return () => {\n      socketRef.current.disconnect();\n    };\n  }, [roomId, user]);\n\n  const sendMessage = (messageBody) => {\n    if (!socketRef.current) return;\n    socketRef.current.emit(NEW_CHAT_MESSAGE_EVENT, {\n      body: messageBody,\n      senderId: socketRef.current.id,\n      user: user,\n    });\n  };\n\n  const startTypingMessage = () => {\n    if (!socketRef.current) return;\n    socketRef.current.emit(START_TYPING_MESSAGE_EVENT, {\n      senderId: socketRef.current.id,\n      user,\n    });\n  };\n\n  const stopTypingMessage = () => {\n    if (!socketRef.current) return;\n    socketRef.current.emit(STOP_TYPING_MESSAGE_EVENT, {\n      senderId: socketRef.current.id,\n      user,\n    });\n  };\n\n  return {\n    messages,\n    user,\n    users,\n    typingUsers,\n    sendMessage,\n    startTypingMessage,\n    stopTypingMessage,\n  };\n};\n\nexport default useChat;\n","/home/yeva/Messanger/src/components/useTyping.js",[],"/home/yeva/Messanger/src/components/ChatMessage/ChatMessage.js",[],"/home/yeva/Messanger/src/components/NewMessageForm/NewMessageForm.js",[],"/home/yeva/Messanger/src/components/TypingMessage/TypingMessage.js",[],"/home/yeva/Messanger/src/components/Users/Users.js",[],"/home/yeva/Messanger/src/components/UserAvatar/UserAvatar.js",[],"/home/yeva/Messanger/src/components/TypingAnimation/TypingAnimation.js",[],{"ruleId":"91","severity":1,"message":"92","line":8,"column":8,"nodeType":"93","messageId":"94","endLine":8,"endColumn":10},{"ruleId":"91","severity":1,"message":"95","line":7,"column":8,"nodeType":"93","messageId":"94","endLine":7,"endColumn":21},{"ruleId":"96","replacedBy":"97"},{"ruleId":"98","replacedBy":"99"},{"ruleId":"100","severity":1,"message":"101","line":27,"column":17,"nodeType":"102","messageId":"103","endLine":27,"endColumn":18,"suggestions":"104"},{"ruleId":"100","severity":1,"message":"101","line":27,"column":42,"nodeType":"102","messageId":"103","endLine":27,"endColumn":43,"suggestions":"105"},{"ruleId":"106","severity":1,"message":"107","line":116,"column":17,"nodeType":"108","endLine":116,"endColumn":29},{"ruleId":"91","severity":1,"message":"109","line":9,"column":10,"nodeType":"93","messageId":"94","endLine":9,"endColumn":19},{"ruleId":"110","severity":1,"message":"111","line":37,"column":6,"nodeType":"112","endLine":37,"endColumn":8,"suggestions":"113"},{"ruleId":"110","severity":1,"message":"114","line":115,"column":6,"nodeType":"112","endLine":115,"endColumn":20,"suggestions":"115"},"no-unused-vars","'io' is defined but never used.","Identifier","unusedVar","'DashboardPage' is defined but never used.","no-native-reassign",["116"],"no-negated-in-lhs",["117"],"no-useless-escape","Unnecessary escape character: \\[.","Literal","unnecessaryEscape",["118","119"],["120","121"],"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'chatrooms' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'email'. Either include it or remove the dependency array.","ArrayExpression",["122"],"React Hook useEffect has a missing dependency: 'messages'. Either include it or remove the dependency array.",["123"],"no-global-assign","no-unsafe-negation",{"messageId":"124","fix":"125","desc":"126"},{"messageId":"127","fix":"128","desc":"129"},{"messageId":"124","fix":"130","desc":"126"},{"messageId":"127","fix":"131","desc":"129"},{"desc":"132","fix":"133"},{"desc":"134","fix":"135"},"removeEscape",{"range":"136","text":"137"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"138","text":"139"},"Replace the `\\` with `\\\\` to include the actual backslash character.",{"range":"140","text":"137"},{"range":"141","text":"139"},"Update the dependencies array to be: [email]",{"range":"142","text":"143"},"Update the dependencies array to be: [messages, roomId, user]",{"range":"144","text":"145"},[500,501],"",[500,500],"\\",[525,526],[525,525],[1244,1246],"[email]",[3446,3460],"[messages, roomId, user]"]